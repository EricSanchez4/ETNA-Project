{"ast":null,"code":"import _classCallCheck from\"/Users/amelieroynette/OCEANET_PROJECT/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/amelieroynette/OCEANET_PROJECT/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/amelieroynette/OCEANET_PROJECT/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/amelieroynette/OCEANET_PROJECT/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/amelieroynette/OCEANET_PROJECT/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import UploadService from\"../services/upload-files.service\";var UploadFiles=/*#__PURE__*/function(_Component){_inherits(UploadFiles,_Component);var _super=_createSuper(UploadFiles);function UploadFiles(props){var _this;_classCallCheck(this,UploadFiles);_this=_super.call(this,props);_this.selectFile=_this.selectFile.bind(_assertThisInitialized(_this));_this.upload=_this.upload.bind(_assertThisInitialized(_this));_this.state={selectedFiles:undefined,currentFile:undefined,progress:0,message:\"\"};return _this;}_createClass(UploadFiles,[{key:\"selectFile\",value:function selectFile(event){this.setState({selectedFiles:event.target.files});}},{key:\"upload\",value:function upload(){var _this2=this;var currentFile=this.state.selectedFiles[0];this.setState({progress:0,currentFile:currentFile});UploadService.upload(currentFile,function(event){_this2.setState({progress:Math.round(100*event.loaded/event.total)});}).then(function(response){_this2.setState({message:response.data.message});}).catch(function(e){console.log(e);_this2.setState({progress:0,message:\"Could not upload the file!\",currentFile:undefined});});this.setState({selectedFiles:undefined});}},{key:\"render\",value:function render(){var _this$state=this.state,selectedFiles=_this$state.selectedFiles,currentFile=_this$state.currentFile,progress=_this$state.progress,message=_this$state.message;return/*#__PURE__*/React.createElement(\"div\",null,currentFile&&/*#__PURE__*/React.createElement(\"div\",{className:\"progress\"},/*#__PURE__*/React.createElement(\"div\",{className:\"progress-bar progress-bar-info progress-bar-striped\",role:\"progressbar\",\"aria-valuenow\":progress,\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\",style:{width:progress+\"%\"}},progress,\"%\")),/*#__PURE__*/React.createElement(\"label\",{className:\"btn btn-default\"},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",onChange:this.selectFile})),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",disabled:!selectedFiles,onClick:this.upload},\"Upload\"),/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-light\",role:\"alert\"},message));}}]);return UploadFiles;}(Component);export{UploadFiles as default};","map":{"version":3,"sources":["/Users/amelieroynette/OCEANET_PROJECT/front/src/components/upload-files.component.js"],"names":["React","Component","UploadService","UploadFiles","props","selectFile","bind","upload","state","selectedFiles","undefined","currentFile","progress","message","event","setState","target","files","Math","round","loaded","total","then","response","data","catch","e","console","log","width"],"mappings":"0yBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,aAAP,KAA0B,kCAA1B,C,GAEqBC,CAAAA,W,0GACnB,qBAAYC,KAAZ,CAAmB,6CACjB,uBAAMA,KAAN,EACA,MAAKC,UAAL,CAAkB,MAAKA,UAAL,CAAgBC,IAAhB,+BAAlB,CACA,MAAKC,MAAL,CAAc,MAAKA,MAAL,CAAYD,IAAZ,+BAAd,CAEA,MAAKE,KAAL,CAAa,CACXC,aAAa,CAAEC,SADJ,CAEXC,WAAW,CAAED,SAFF,CAGXE,QAAQ,CAAE,CAHC,CAIXC,OAAO,CAAE,EAJE,CAAb,CALiB,aAYlB,C,sEAEUC,K,CAAO,CAChB,KAAKC,QAAL,CAAc,CACZN,aAAa,CAAEK,KAAK,CAACE,MAAN,CAAaC,KADhB,CAAd,EAGD,C,uCAEQ,iBACP,GAAIN,CAAAA,WAAW,CAAG,KAAKH,KAAL,CAAWC,aAAX,CAAyB,CAAzB,CAAlB,CAEA,KAAKM,QAAL,CAAc,CACZH,QAAQ,CAAE,CADE,CAEZD,WAAW,CAAEA,WAFD,CAAd,EAKAT,aAAa,CAACK,MAAd,CAAqBI,WAArB,CAAkC,SAACG,KAAD,CAAW,CAC3C,MAAI,CAACC,QAAL,CAAc,CACZH,QAAQ,CAAEM,IAAI,CAACC,KAAL,CAAY,IAAML,KAAK,CAACM,MAAb,CAAuBN,KAAK,CAACO,KAAxC,CADE,CAAd,EAGD,CAJD,EAKGC,IALH,CAKQ,SAACC,QAAD,CAAc,CAClB,MAAI,CAACR,QAAL,CAAc,CACZF,OAAO,CAAEU,QAAQ,CAACC,IAAT,CAAcX,OADX,CAAd,EAGD,CATH,EAUGY,KAVH,CAUS,SAACC,CAAD,CAAO,CACZC,OAAO,CAACC,GAAR,CAAYF,CAAZ,EACA,MAAI,CAACX,QAAL,CAAc,CACZH,QAAQ,CAAE,CADE,CAEZC,OAAO,CAAE,4BAFG,CAGZF,WAAW,CAAED,SAHD,CAAd,EAKD,CAjBH,EAmBA,KAAKK,QAAL,CAAc,CACZN,aAAa,CAAEC,SADH,CAAd,EAGD,C,uCAEQ,iBAMH,KAAKF,KANF,CAELC,aAFK,aAELA,aAFK,CAGLE,WAHK,aAGLA,WAHK,CAILC,QAJK,aAILA,QAJK,CAKLC,OALK,aAKLA,OALK,CAQP,mBACE,+BACGF,WAAW,eACV,2BAAK,SAAS,CAAC,UAAf,eACE,2BACE,SAAS,CAAC,qDADZ,CAEE,IAAI,CAAC,aAFP,CAGE,gBAAeC,QAHjB,CAIE,gBAAc,GAJhB,CAKE,gBAAc,KALhB,CAME,KAAK,CAAE,CAAEiB,KAAK,CAAEjB,QAAQ,CAAG,GAApB,CANT,EAQGA,QARH,KADF,CAFJ,cAgBE,6BAAO,SAAS,CAAC,iBAAjB,eACE,6BAAO,IAAI,CAAC,MAAZ,CAAmB,QAAQ,CAAE,KAAKP,UAAlC,EADF,CAhBF,cAoBE,8BACE,SAAS,CAAC,iBADZ,CAEE,QAAQ,CAAE,CAACI,aAFb,CAGE,OAAO,CAAE,KAAKF,MAHhB,WApBF,cA4BE,2BAAK,SAAS,CAAC,mBAAf,CAAmC,IAAI,CAAC,OAAxC,EACGM,OADH,CA5BF,CADF,CAkCD,C,yBA/FsCZ,S,SAApBE,W","sourcesContent":["import React, { Component } from \"react\";\nimport UploadService from \"../services/upload-files.service\";\n\nexport default class UploadFiles extends Component {\n  constructor(props) {\n    super(props);\n    this.selectFile = this.selectFile.bind(this);\n    this.upload = this.upload.bind(this);\n\n    this.state = {\n      selectedFiles: undefined,\n      currentFile: undefined,\n      progress: 0,\n      message: \"\",\n\n    };\n  }\n\n  selectFile(event) {\n    this.setState({\n      selectedFiles: event.target.files,\n    });\n  }\n\n  upload() {\n    let currentFile = this.state.selectedFiles[0];\n\n    this.setState({\n      progress: 0,\n      currentFile: currentFile,\n    });\n\n    UploadService.upload(currentFile, (event) => {\n      this.setState({\n        progress: Math.round((100 * event.loaded) / event.total),\n      });\n    })\n      .then((response) => {\n        this.setState({\n          message: response.data.message,\n        });\n      })\n      .catch((e) => {\n        console.log(e)\n        this.setState({\n          progress: 0,\n          message: \"Could not upload the file!\",\n          currentFile: undefined,\n        });\n      });\n\n    this.setState({\n      selectedFiles: undefined,\n    });\n  }\n\n  render() {\n    const {\n      selectedFiles,\n      currentFile,\n      progress,\n      message,\n    } = this.state;\n\n    return (\n      <div>\n        {currentFile && (\n          <div className=\"progress\">\n            <div\n              className=\"progress-bar progress-bar-info progress-bar-striped\"\n              role=\"progressbar\"\n              aria-valuenow={progress}\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n              style={{ width: progress + \"%\" }}\n            >\n              {progress}%\n            </div>\n          </div>\n        )}\n\n        <label className=\"btn btn-default\">\n          <input type=\"file\" onChange={this.selectFile} />\n        </label>\n\n        <button\n          className=\"btn btn-success\"\n          disabled={!selectedFiles}\n          onClick={this.upload}\n        >\n          Upload\n        </button>\n\n        <div className=\"alert alert-light\" role=\"alert\">\n          {message}\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}